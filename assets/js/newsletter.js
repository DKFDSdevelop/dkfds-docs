(()=>{"use strict";function e(e){return new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i).test(e)}function t(e){e.setAttribute("hidden",""),e.classList.remove("alert-success"),e.classList.remove("alert-warning"),e.classList.remove("alert-error"),e.querySelector(".alert-heading").innerHTML="",e.querySelector(".alert-text").innerHTML=""}document.addEventListener("DOMContentLoaded",(function(){var r=document.querySelector("body").classList.contains("page-nyhedsbrev"),s=document.querySelector("body").classList.contains("page-afmeld-nyhedsbrev"),n=document.getElementById("newsletter-alert");if(document.getElementById("newsletter_lists").setAttribute("name","lists"),document.getElementById("newsletter_lists").value="82268",document.getElementById("newsletter_language").setAttribute("name","language_code"),document.getElementById("newsletter_language").value="da",document.getElementById("i_newsform_email").setAttribute("name","email_address"),r&&(document.getElementById("newsletter_action").setAttribute("name","action"),document.getElementById("newsletter_action").value="subscribe",document.getElementById("samtykke-check").setAttribute("name","data_Samtykke"),document.getElementById("samtykke-check").value="Ja"),s&&(document.getElementById("newsletter_action").setAttribute("name","action"),document.getElementById("newsletter_action").value="unsubscribe"),r||s){if(document.getElementById("newsform").addEventListener("submit",(function(e){e.preventDefault()})),""!==window.location.search){for(var a=[],l=window.location.search.substring(1).split("&"),d=l.length-1;d>-1;d--){var i=l[d].split("=");if("error_codes"===i[0]){a=i[1].split("%3B");break}}n.classList.add("alert-error"),r?n.querySelector(".alert-heading").innerHTML="Tilmelding fejlede":s&&(n.querySelector(".alert-heading").innerHTML="Afmelding fejlede"),a.includes("11")&&r?n.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er allerede tilmeldt nyhedsbrevet.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':a.includes("14")&&s?n.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er ikke tilmeldt nyhedsbrevet og kan derfor ikke afmeldes.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':r?n.querySelector(".alert-text").innerHTML='<p>Det var ikke muligt at tilmelde den indtastede e-mailadresse. Tjek at du har indtastet den korrekte e-mailadresse og prøv at tilmelde igen.</p><p class="mb-0">Hvis problemet fortsætter, så <a href="mailto:FDS@erst.dk">send en e-mail til FDS-teamet</a> og oplys fejlkoden <strong>error_codes_'+a.toString()+"</strong> samt den <strong>e-mailadresse, du forsøgte at tilmelde</strong>. Vi beklager ulejligheden.</p>":s&&(n.querySelector(".alert-text").innerHTML='<p>Det var ikke muligt at afmelde den indtastede e-mailadresse. Tjek at du har indtastet den korrekte e-mailadresse og prøv at afmelde igen.</p><p class="mb-0">Hvis problemet fortsætter, så <a href="mailto:FDS@erst.dk">send en e-mail til FDS-teamet</a> og oplys fejlkoden <strong>error_codes_'+a.toString()+"</strong> samt den <strong>e-mailadresse, du forsøgte at afmelde</strong>. Vi beklager ulejligheden.</p>"),n.removeAttribute("hidden")}document.getElementById("newsletter-submit").addEventListener("click",(function(a){var l="",d=document.getElementById("newsletter-emailaddress"),i=document.getElementById("i_newsform_email").value,o=d.querySelector(".form-error-message");if(n.hidden||t(n),e(i))d.classList.remove("form-error"),o.innerHTML="",o.classList.add("d-none");else{var m="E-mailadressen er ikke gyldig";d.classList.add("form-error"),o.innerHTML='<span class="sr-only">Fejl: </span>'+m,o.classList.remove("d-none"),l+='<li><a class="function-link" href="#i_newsform_email">'+m+"</a></li>"}if(r){var c=document.getElementById("samtykke-group");if(document.getElementById("samtykke-check").checked)c.classList.remove("form-error"),c.querySelector(".form-error-message").innerHTML="",c.querySelector(".form-error-message").classList.add("d-none");else{var u="Giv os venligst dit samtykke, så vi må opbevare din e-mailadresse. Uden dit samtykke kan vi ikke sende dig nyhedsbrevet.";c.classList.add("form-error"),c.querySelector(".form-error-message").innerHTML='<span class="sr-only">Fejl: </span>'+u,c.querySelector(".form-error-message").classList.remove("d-none"),l+='<li><a class="function-link" href="#samtykke-check">'+u+"</a></li>"}}""!==l?(n.classList.add("alert-error"),n.querySelector(".alert-heading").innerHTML="Der er problemer",n.querySelector(".alert-text").innerHTML='<ul class="nobullet-list mt-0 mb-0">'+l+"</ul>",n.removeAttribute("hidden"),e(i)?r&&document.getElementById("samtykke-check").focus():document.getElementById("i_newsform_email").focus()):(document.getElementById("failure_url").value=window.location.href.replace(/\?.+/gi,""),r?document.getElementById("success_url").value=window.location.href+"tilmeldt/":s&&(document.getElementById("success_url").value=window.location.href.replace("afmeld","afmeldt")),t(n),d.classList.remove("form-error"),o.innerHTML="",o.classList.add("d-none"),r&&(document.getElementById("samtykke-group").classList.remove("form-error"),document.getElementById("samtykke-group").querySelector(".form-error-message").innerHTML="",document.getElementById("samtykke-group").querySelector(".form-error-message").classList.add("d-none")),document.getElementById("newsform").submit())}))}}))})();