(()=>{"use strict";function e(e){return new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i).test(e)}function t(e){"NAV"===e.parentNode.nodeName?e.parentNode.setAttribute("hidden",""):e.setAttribute("hidden",""),e.classList.remove("alert-success"),e.classList.remove("alert-warning"),e.classList.remove("alert-error"),e.querySelector(".alert-heading").innerHTML="",e.querySelector(".alert-text").innerHTML="",document.getElementById("newsletter-emailaddress").querySelector(".form-input").removeAttribute("aria-describedby"),document.querySelector("body").classList.contains("page-nyhedsbrev")&&document.getElementById("samtykke-check").removeAttribute("aria-describedby")}document.addEventListener("DOMContentLoaded",function(){var r=document.querySelector("body").classList.contains("page-nyhedsbrev"),n=document.querySelector("body").classList.contains("page-afmeld-nyhedsbrev"),l=document.getElementById("newsletter-alert"),s=document.getElementById("newsletter-alert-nav");if((r||n)&&(document.getElementById("newsletter_lists").setAttribute("name","lists"),document.getElementById("newsletter_lists").value="82268",document.getElementById("newsletter_language").setAttribute("name","language_code"),document.getElementById("newsletter_language").value="da",document.getElementById("i_newsform_email").setAttribute("name","email_address")),r&&(document.getElementById("newsletter_action").setAttribute("name","action"),document.getElementById("newsletter_action").value="subscribe",document.getElementById("samtykke-check").setAttribute("name","data_Samtykke"),document.getElementById("samtykke-check").value="Ja"),n&&(document.getElementById("newsletter_action").setAttribute("name","action"),document.getElementById("newsletter_action").value="unsubscribe"),r||n){if(document.getElementById("newsform").addEventListener("submit",function(e){e.preventDefault()}),""!==window.location.search){var a,d=(null===(a=new URLSearchParams(window.location.search).get("error_codes"))||void 0===a?void 0:a.split(";"))||[];l.classList.add("alert-error"),r?l.querySelector(".alert-heading").innerHTML="Tilmelding fejlede":n&&(l.querySelector(".alert-heading").innerHTML="Afmelding fejlede"),d.includes("11")&&r?l.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er allerede tilmeldt nyhedsbrevet.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':d.includes("14")&&n?l.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er ikke tilmeldt nyhedsbrevet og kan derfor ikke afmeldes.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':r?l.querySelector(".alert-text").innerHTML='<p>Det var ikke muligt at tilmelde den indtastede e-mailadresse. Tjek at du har indtastet den korrekte e-mailadresse og prøv at tilmelde igen.</p><p class="mb-0">Hvis problemet fortsætter, så <a href="mailto:FDS@erst.dk">send en e-mail til FDS-teamet</a> og oplys fejlkoden <strong>error_codes_'+d.toString()+"</strong> samt den <strong>e-mailadresse, du forsøgte at tilmelde</strong>. Vi beklager ulejligheden.</p>":n&&(l.querySelector(".alert-text").innerHTML='<p>Det var ikke muligt at afmelde den indtastede e-mailadresse. Tjek at du har indtastet den korrekte e-mailadresse og prøv at afmelde igen.</p><p class="mb-0">Hvis problemet fortsætter, så <a href="mailto:FDS@erst.dk">send en e-mail til FDS-teamet</a> og oplys fejlkoden <strong>error_codes_'+d.toString()+"</strong> samt den <strong>e-mailadresse, du forsøgte at afmelde</strong>. Vi beklager ulejligheden.</p>"),l.removeAttribute("hidden")}document.getElementById("newsletter-submit").addEventListener("click",function(a){var d,i="",o=document.getElementById("newsletter-emailaddress"),m=o.querySelector("input").value;if(t(l),t(s),e(m)){var c;null===(c=o.querySelector("fds-error-message"))||void 0===c||c.remove()}else{var u="E-mailadressen er ikke gyldig";if(o.querySelector("fds-error-message"))o.querySelector("fds-error-message .visible-message").textContent=u;else{var g=document.createElement("fds-error-message");g.textContent=u,o.querySelector("label").after(g)}i+='<li><a class="function-link" href="#i_newsform_email">'+u+"</a></li>"}if(r){var y=document.getElementById("samtykke-check"),k=document.getElementById("samtykke-check-error");if(y.checked)k.setAttribute("hidden","");else{k.removeAttribute("hidden"),i+='<li><a class="function-link" href="#samtykke-check">Giv os venligst dit samtykke, så vi må opbevare din e-mailadresse. Uden dit samtykke kan vi ikke sende dig nyhedsbrevet.</a></li>'}}""!==i?(s.classList.add("alert-error"),s.querySelector(".alert-heading").innerHTML="Der er problemer",s.querySelector(".alert-text").innerHTML='<ul class="nobullet-list mt-0 mb-0">'+i+"</ul>",s.parentNode.removeAttribute("hidden"),e(m)?r&&document.getElementById("samtykke-check").focus():document.getElementById("i_newsform_email").focus()):(r?(document.getElementById("success_url").value=window.location.origin+"/faellesskab/nyhedsmail/tilmeldt/",document.getElementById("failure_url").value=window.location.origin+"/faellesskab/nyhedsmail/"):n&&(document.getElementById("success_url").value=window.location.origin+"/faellesskab/nyhedsmail/afmeldt/",document.getElementById("failure_url").value=window.location.origin+"/faellesskab/nyhedsmail/afmeld/"),t(l),t(s),null===(d=o.querySelector("fds-error-message"))||void 0===d||d.remove(),r&&(document.getElementById("samtykke-group").classList.remove("form-error"),document.getElementById("samtykke-group").querySelector(".form-error-message").innerHTML="",document.getElementById("samtykke-group").querySelector(".form-error-message").classList.add("d-none")),document.getElementById("newsform").submit())})}})})();