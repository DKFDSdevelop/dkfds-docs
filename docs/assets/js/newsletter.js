(()=>{"use strict";function e(e){return new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i).test(e)}function r(e){e.setAttribute("hidden",""),e.classList.remove("alert-success"),e.classList.remove("alert-warning"),e.classList.remove("alert-error"),e.querySelector(".alert-heading").innerHTML="",e.querySelector(".alert-text").innerHTML=""}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("body").classList.contains("page-nyhedsbrev"),s=document.querySelector("body").classList.contains("page-afmeld-nyhedsbrev"),n=document.getElementById("newsletter-alert");if(t||s){if(document.getElementById("newsform").addEventListener("submit",(function(e){e.preventDefault()})),""!==window.location.search){for(var l=[],a=window.location.search.substring(1).split("&"),o=a.length-1;o>-1;o--){var i=a[o].split("=");if("error_codes"===i[0]){l=i[1].split("%3B");break}}n.classList.add("alert-error"),t?n.querySelector(".alert-heading").innerHTML="Tilmelding fejlede":s&&(n.querySelector(".alert-heading").innerHTML="Afmelding fejlede"),l.includes("11")?n.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er allerede tilmeldt nyhedsbrevet.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':l.includes("14")?n.querySelector(".alert-text").innerHTML='<p>Den indtastede adresse er ikke tilmeldt nyhedsbrevet og kan derfor ikke afmeldes.</p><p class="mb-0">Du er velkommen til at <a href="mailto:FDS@erst.dk">sende en e-mail til FDS-teamet</a>, hvis du har spørgsmål.</p>':n.querySelector(".alert-text").innerHTML='<p>Det var ikke muligt at afmelde den indtastede e-mailadresse. Tjek at du har indtastet den korrekte e-mailadresse og prøv at afmelde igen.</p><p class="mb-0">Hvis problemet fortsætter, så <a href="mailto:FDS@erst.dk">send en e-mail til FDS-teamet</a> og oplys fejlkoden <strong>error_codes_'+l.toString()+"</strong> samt den <strong>e-mailadresse, du forsøgte at afmelde</strong>. Vi beklager ulejligheden.</p>",n.removeAttribute("hidden")}document.getElementById("newsletter-submit").addEventListener("click",(function(l){var a="",o=document.getElementById("newsletter-emailaddress"),i=document.getElementById("i_newsform_email").value,d=o.querySelector(".form-error-message");if(n.hidden||r(n),e(i))o.classList.remove("form-error"),d.innerHTML="",d.classList.add("d-none");else{var m="E-mailadressen er ikke gyldig";o.classList.add("form-error"),d.innerHTML='<span class="sr-only">Fejl: </span>'+m,d.classList.remove("d-none"),a+='<li><a class="function-link" href="#i_newsform_email">'+m+"</a></li>"}if(t){var c=document.getElementById("samtykke-group");if(document.getElementById("samtykke-check").checked)c.classList.remove("form-error"),c.querySelector(".form-error-message").innerHTML="",c.querySelector(".form-error-message").classList.add("d-none");else{var u="Giv os venligst dit samtykke, så vi må opbevare din e-mailadresse. Uden dit samtykke kan vi ikke sende dig nyhedsbrevet.";c.classList.add("form-error"),c.querySelector(".form-error-message").innerHTML='<span class="sr-only">Fejl: </span>'+u,c.querySelector(".form-error-message").classList.remove("d-none"),a+='<li><a class="function-link" href="#samtykke-check">'+u+"</a></li>"}}""!==a?(n.classList.add("alert-error"),n.querySelector(".alert-heading").innerHTML="Der er problemer",n.querySelector(".alert-text").innerHTML='<ul class="nobullet-list mt-0 mb-0">'+a+"</ul>",n.removeAttribute("hidden"),e(i)?t&&document.getElementById("samtykke-check").focus():document.getElementById("i_newsform_email").focus()):(document.getElementById("failure_url").value=window.location.href.replace(/\?.+/gi,""),t?document.getElementById("success_url").value=window.location.href+"tilmeldt/":s&&(document.getElementById("success_url").value=window.location.href.replace("afmeld","afmeldt")),r(n),o.classList.remove("form-error"),d.innerHTML="",d.classList.add("d-none"),t&&(document.getElementById("samtykke-group").classList.remove("form-error"),document.getElementById("samtykke-group").querySelector(".form-error-message").innerHTML="",document.getElementById("samtykke-group").querySelector(".form-error-message").classList.add("d-none")),document.getElementById("newsform").submit())}))}}))})();